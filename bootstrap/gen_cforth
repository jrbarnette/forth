#!/bin/bash
# Copyright 2013, by J. Richard Barnette. All Rights Reserved.

if [ $# -ne 2 ]
then
    echo "usage: $(basename $0) <variable> <file>" >&2
    exit 1
fi

VARIABLE=$1
FILE=$2
cat <<END
/*
 * This file is automatically generated from "$FILE".
 * Don't edit this file; edit the source.
 */

/*
 * We expect a declaration for $VARIABLE in the header.
 * Include the header to check the declaration against the
 * definition below.
 */
#include "forth.h"

char $VARIABLE[] =
$(sed '
    s/[\"]/\\&/g
    s/	/\\t/g
    s/.*/    "&\\n"/
  ' $FILE)
;
END
