indicators
    BLK is not 0
	input buffer is specified block
	REFILL increments BLK
	    TRUE if new BLK is valid
	    FALSE if new BLK is not valid
    BLK is 0 and source-id is -1
	input buffer is string
	REFILL returns FALSE
    BLK is 0 and source-id is 0
	input buffer is terminal buffer
	REFILL uses ACCEPT
	    FALSE at EOF
	    TRUE if not EOF
    BLK is 0 and source-id is fileid
	input buffer is a file buffer
	REFILL reads from file
	    FALSE at EOF
	    TRUE if not EOF
====
class input-source
    abstract source-id
    variable input-buffer
    variable input-size
    variable >in
    abstract save-input
    abstract restore-input
    abstract real-refill
    : refill real-refill ?dup if 0 >in ! then ;
    : source input-buffer @ input-size @ ;

class string-input extends input-source
    -1 constant source-id
    : real-refill false ;

class terminal extends input-source
    0 constant source-id
    80 constant input-max
    create input-data input-max chars allot
    input-data input-buffer !

class seekable-file extends terminal
    file-offset
