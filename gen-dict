#!/bin/bash
# Copyright 2019, by J. Richard Barnette. All Rights Reserved.

usage() {
    echo "usage: $(basename $0) target-type" >&2
    exit 1
}

cd $(dirname $0)

if [ $# -ne 1 ]
then
    usage
fi

FILEORDER="forth/$1/file-order"
if [ ! -f $FILEORDER ]
then
    echo "$FILEORDER: no file" >&2
    usage
fi

FILES=( $(sed 's/#.*//' $FILEORDER) )
cat <<END_HEAD
/*
 * Copyright 2019, by J. Richard Barnette. All Rights Reserved.
 */

/* This file was automatically generated by "$(basename $0) $*" */

END_HEAD
cat "${FILES[@]}" | bootstrap/forth
